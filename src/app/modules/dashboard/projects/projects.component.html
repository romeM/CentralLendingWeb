<div class="panel-header panel-header-sm">
</div>
<div class="main-content">
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header">
          <h4 class="card-title"> Projets</h4>
        </div>
        <div class="card-body">

            <div class="row">
                <div class="col-md-6 px-1">
                    <ng-select [items]="projects"
                    #select
                    bindLabel="name"
                    dropdownPosition="auto"
                    bindValue="id"
                    (change)="onChange($event)"
                    labelForId="project"
                    placeholder="Select project"
                    [virtualScroll]="true">
                      <ng-template ng-option-tmp let-item="item" let-search="searchTerm">
                          <div><span [ngOptionHighlight]="search">{{item.name}}</span></div>
                          <small><b>Plateforme:</b> {{item.platform}} | <b>Note:</b> {{item.note}}</small>
                      </ng-template>
                    </ng-select>
            </div>
          <div class="table-responsive">
            <table class="table">
              <thead class=" text-primary">
                <th>
                  Nom
                </th>
                <th>
                  Plateforme
                </th>
                <th>
                  Note
                </th>
                <th>
                  Montant Total
                </th>
                <th>
                  Taux
                </th>
                <th >
                  Durée
                </th>
                <th>
                    Montant
                </th>
                <th>
                    Date
                </th>
                <th>
                </th>
              </thead>
              <tbody>
                <tr *ngFor="let personProject of personProjects; trackBy:identify">
                  <td>
                      <a href="{{personProject.project.link}}" target="_blank">
                      {{personProject.project.name}}
                      </a>
                  </td>
                  <td>
                      {{personProject.project.platform}}
                  </td>
                  <td>
                      {{personProject.project.note}}
                  </td>
                  <td>
                      {{personProject.project.amount | currency:'EUR'}}
                  </td>
                  <td>
                      {{personProject.project.rate}} %
                  </td>
                  <td>
                      {{personProject.project.term}}
                  </td>
                  <td>
                      <input type="text" placeholder="Montant" [(ngModel)]="personProject.amount" name="amount" required>
                  </td>
                  <td>
                    <mat-form-field>
                      <input matInput  [matDatepicker]="startDatepicker" placeholder="Choisir la date de début" [(ngModel)]="personProject.startDate">
                      <mat-datepicker-toggle matSuffix [for]="startDatepicker"></mat-datepicker-toggle>
                      <mat-datepicker #startDatepicker></mat-datepicker>
                    </mat-form-field>
                  </td>
                  <td>
                      <mat-checkbox (change)="savePersonProject(personProject)">Save</mat-checkbox>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    
  </div>
</div>
